<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{% block title %}Insta Chat{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:#fafafa; color:#111; }
      .topbar { background:#fff; border-bottom:1px solid #e6e6e6; padding:10px 16px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:2; }
      .container { max-width:980px; margin:16px auto; display:flex; gap:20px; }
      .sidebar { width:260px; background:#fff; border:1px solid #e6e6e6; border-radius:8px; padding:12px; height:70vh; overflow:auto; }
      .main { flex:1; background:#fff; border:1px solid #e6e6e6; border-radius:8px; padding:12px; height:70vh; display:flex; flex-direction:column; }
      .user-row { display:flex; align-items:center; gap:10px; padding:8px; border-radius:6px; cursor:pointer; }
      .user-row:hover { background:#fafafa; }
      .avatar { width:42px; height:42px; border-radius:50%; background:#ddd; display:inline-flex; align-items:center; justify-content:center; font-weight:600; color:#444; }
      .msg-bubble { padding:8px 12px; border-radius:16px; margin:6px 0; max-width:70%; display:inline-block; }
      .msg-me { background:#dcf8c6; align-self:flex-end; border-bottom-right-radius:4px; }
      .msg-other { background:#fff; border:1px solid #eee; align-self:flex-start; }
      .messages { flex:1; overflow:auto; padding:8px; display:flex; flex-direction:column; }
      .compose { display:flex; gap:8px; padding-top:8px; }
      .compose input { flex:1; padding:10px; border:1px solid #e6e6e6; border-radius:20px; }
      .small { font-size:12px; color:#666; }
      a { color:inherit; text-decoration:none; }
    </style>
    {% block head %}{% endblock %}
  </head>
  <body>
    <div class="topbar">
      <div><strong>Insta Chat</strong></div>
      <div>
        {% if current_user.is_authenticated %}
          <span class="small">Logged in as <strong>{{ current_user.username }}</strong></span>
          &nbsp;|&nbsp; <a href="{{ url_for('profile') }}">Profile</a>
          &nbsp;|&nbsp; <a href="{{ url_for('logout') }}">Logout</a>
        {% endif %}
      </div>
    </div>
    <div class="container">
      {% block content %}{% endblock %}
    </div>
    {% block scripts %}{% endblock %}
  </body>
</html>